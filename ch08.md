# H.264一致性、传输和许可

## 8.1 引言

第4、5、6 和 7 章介绍了 H.264 高级视频压缩的基本概念，以及使 H.264 编解码器能够高效地对视频进行编码和解码的关键算法。行业标准的目的是实现编码器、比特流和解码器之间的互操作性；即标准使得由一个制造商的编码器编码的比特流可以用不同制造商的解码器解码。H.264/AVC 定义了 Profile 和 Level，以对特殊的编码工具、解码序列所需的计算容量和存储设置操作限制。一致性是用一个理论的“模型”，一个假设的参考解码器来验证的。

H.264/AVC 的实际应用包括传输和/或存储编码视频信息。该标准包含了许多设计的特性，用以支持编码比特流的高效、健壮传输，包括第 5 章介绍的参数集和 NAL 单元，以及本章中描述的特定传输工具。为了支持日益多样化的视频内容和显示类型，包括 SEI 和 VUI 等额外信息，可以与编码视频数据一起传输。

视频编码是一项大业务，世界上许多行业都依赖视频压缩来实现数字媒体产品和服务。在视频编码领域已经有成千上万的专利被公布，H.264/AVC 实现的许可对于商业数字视频应用来说，是一个重要的问题。

## 8.2 遵循标准

H.264/AVC 规定了许多语法选项和解码算法，涵盖了广泛的潜在编码场景。该标准旨在为特定应用支持视频编码，如显示分辨率有限的小型手持设备；最小化计算能力，通过高清晰度解码器与大量的内存和计算资源。该标准描述了可能出现在比特流中的各种语法元素，并明确的规定了为了产生输出视频序列，应如何处理和解码每个语法元素。

知道特定的解码器是否能够处理特定的编码序列，是非常重要的，即解码和显示是否在解码器的能力范围内。这是通过为每个编码序列指定`Profile`和`Level`来实现的。`Profile`在解码器端有算法约束，它决定了解码器应该能够处理哪些解码工具。而`Level`约束了解码端的数据处理和存储，它决定了解码端能够存储、处理和输出到显示器的数据量。通过提取`Profile`和`Level`参数，H.264 解码器可以迅速知道其是否能够解码特定比特流，并确定解码器的能力。

### 8.2.1 Profiles

H.264/AVC 标准制定了许多 Profiles，每个 Profile 指定了H.264 标准中可用的编码工具的子集。Profile 限制了 H.264 解码器所需的算法能力。因此，符合 H.264 的 Main Profile 的解码器只需要支持 Main Profile 中包含的工具；High Profile 解码器需要支持进一步的编码工具；等等。每个 Profile 都只在对一类应用程序有用。例如，基于 Baseline Profile 可用于具有相对较低计算复杂度的低延迟、会话应用，例如视频会议。Main Profile 可适用于基于电视/娱乐应用，例如标准定义电视服务。High Profile 在Main Profile中添加一些工具，这些工具可以提高压缩效率，特别是对于更高空间分辨率的服务，例如高清电视。

#### 8.2.1.1 Baseline、Constrained Baseline、Extended 和 Main Profile

图 8.1 显示了 Baseline、Constrained Baseline、Extended 和 Main Profile 支持的的工具。Baseline Profile最初旨在适用于低复杂度、低延迟的应用，例如会话或移动视频传输。它包括 I 和 P Slice 类型，允许帧内预测和从单一参考帧的运动补偿预测、基本 4x4 整数变换和 CAVLC 熵编码。它还支持三种提高传输效率的工具：FMO、ASO和冗余切片(章节 8.3)。然而，这最后三种工具并没有收到编解码器制造商的欢迎，大多数 H.264/AVC 的实现不支持 FMO、ASO 或 冗余切片。也因为如此，对标准的最近修订包括 Costrained Baseline，Costrained Baseline不再包好这些工具。

扩展的 Profile 是 Baseline Profile的超集，它增加了可能有助于高效网络传输 H.264 数据的更多工具(第 8.3 节)。Main Profile 是 Constrained Baseline Profile 的超集，它增加了可能适用于广播和娱乐应用程序(如数字电视和 DVD 播放)的编码工具，即 CABAC 熵编码和具有双向预测的 B Slices 以及用于隔行视频内容的帧、场编码支持，其中 B Slice 为了提高编码效率，有加权预测。

#### 8.2.1.2 High Profiles

图 8.2 给出了 4 种 High Profile，为了作比较，同时给出了 Main Profile,作为对比。每种 Profile 都会添加编码工具用以，支持更高质量的应用程序--高清、扩展位深度、更高颜色深度，相应的更高的解码复杂度。High Profile 是 Main Profile 的超集，它添加了如下工具：8x8 变换和 8x8 帧内预测（为获得更好的编码性能，特别是在更高的空间分辨率下）、支持频率相关量化器权重的量化器矩阵、将 Cb 和 Cr 的量化器参数分开、支持纯色视频(4:0:0 格式)。High Profile 是的对同一级别使用更高的编码数据速率成为可能(见第 8.2.2 节)。High Profile 对于高清晰度应用尤其有用。

更多的 Profile 添加了更复杂的工具，这些工具对于“专业”应用程序(如内容分发、存档等)可能是必要的或有用的。每个采样掉的最大位数在 High10 Profile 里是 10 bi，在 High44pred Profile 里是 14bit。High422 Profile 支持 4:2:2 视频，即更高的色度分辨率。High444 Profile 将此扩展位 4:4:4 视频，是的色度分量和亮度分量有同样的分辨率，并未每个色度分量添加单独的编码，以及使用预测编码进一步无损编码。

#### 8.2.1.3 Intra Profiles

### 8.2.2 Levels

## 8.3 支持传输的 H.264 编码工具

## 8.4 H.264 数据传输

## 8.5 补充信息

## 8.6 许可 H.264/AVC

## 8.7 总结


